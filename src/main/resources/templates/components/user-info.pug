include ../controls/input-text

if user == null
    mixin user-info
        .panel.is-info(style="min-width:320px;")&attributes(attributes)
            .panel-heading User info
            .panel-block
                form(hx-get="/users/myself" hx-swap="outerHTML" hx-trigger="load")
else
    form(hx-put="/users/myself" hx-swap="outerHTML")
        +input-text("Name", "name", user.getName())
        button.button.is-pulled-right.is-primary(type = "submit") Save
        if message
          script(type="text/javascript")!= `notify("${message}","is-success")`
